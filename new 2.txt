Table of Contents
SAR Review Enhancement Documentation
1.	SQL-Based Data Preparation
1.1 SQL Extraction and Cleaning
1.2 SAR Narrative Preprocessing
1.3 Data Sources Overview
2.	LLM and Regex-Assisted Narrative Analysis
2.1 SAR Narrative Exploration
2.2 SAR Narrative Characteristics
2.3 SAR Keyword Identification with Regex Matching
3.	LLM-Generated SAR Summarization & Description
3.1 LLM Prompting & Role Definition
3.2 LLM Output Format: Brief Overview
3.2.1 Example Brief Overview
3.2.2 Benefits for SAR Reviewers
3.3 LLM Output Format: Detailed Description
3.3.1 Example Detailed Description
3.3.2 Benefits for SAR Reviewers
3.4 LLM Narrative Processing
4.	Final Structured Output & Integration
4.1 Combining Regex and LLM Results
4.2 Multiple Topics per Case
5.	Validation and Maintenance
5.1 LLM Result Validation
5.2 SAR Output Validation
5.3 Monthly BAU Maintenance
5.4 Data Refresh Schedule
________________________________________
SAR Review Enhancement Report
This document details the workflow for the SAR Review Enhancement project. This project aims to accelerate and facilitate SAR review by leveraging Large Language Models (LLMs) and regular expressions (Regex) to extract key information from SAR narratives. The primary outcome of this project is the LLM generation of a Brief Overview and Detailed Description of each SAR narrative, along with RegEx-based fact pattern identification of specific phrases, which provides SAR Managers with a structured, auditable, and easily searchable dataset to improve review efficiency and quality assurance.
1. SQL-Based Data Preparation
This stage extracts and prepares SAR data from the Oracle database, ensuring that all the reports are captured and cleaned for downstream analysis. (Sections 1.1, 1.2, & 1.3 remain largely the same as the previous version, focusing on data extraction and cleaning.)
1.1 SQL Extraction and Cleaning
The SQL query extracts essential fields from the Oracle database. The primary goal is to retrieve all of the SAR reports for each case, including:
•	Case ID: Unique identifier for the entire case.
•	Report ID: Unique identifier for the individual SAR report.
•	Report File Date: Date the SAR report was filed.
•	SAR Narrative: The free-text description of the suspicious activity.
The SQL query handles variations in data formatting and detail levels within the source system. Data inconsistencies and varying language styles are addressed to ensure a clean and standardized dataset.
1.2 SAR Dataset Standardization
xxxxxxxxxxxxxx
1.3 Data Sources Overview
xxxxxxxxxxxxxxx
2. LLM and Regex-Assisted Narrative Analysis
This stage analyzes the cleaned SAR narratives using a combination of Regex and LLM techniques to identify relevant topics and prepare the narrative for LLM summarization.
2.1 SAR Narrative Exploration (Remains largely the same)
Initial analysis of SAR narratives revealed several key characteristics:
•	Varied Lengths and Detail Levels: Narratives range significantly in length and the level of detail provided.
•	Inconsistent Terminology: Similar activities are described using different phrasing and terminology.
•	Mixed Language: Narratives may contain a mix of natural language and system-generated codes or abbreviations.
These characteristics necessitate a robust analysis approach that can handle variability and extract meaningful information.
2.2 SAR Narrative Characteristics (Remains largely the same)
SAR Narratives are often complex and unstructured, presenting several challenges for automated analysis:
•	Free-form Text: The narratives are typically written in free-form text, with varying grammar and sentence structure.
•	Ambiguity: The meaning of certain phrases can be ambiguous without context.
•	Domain-Specific Language: The narratives often use specialized terminology related to financial transactions and fraud detection.
2.3 SAR Keyword Identification with Regex Matching
To address inconsistent terminology, regular expressions (Regex) are used to identify and group related keywords into standardized behavioral topics. This step provides an initial layer of topic identification that complements the more nuanced analysis performed by the LLM.
3. LLM-Generated SAR Summarization & Description
This section focuses on the core output of the project: the LLM-generated Brief Overview and Detailed Description.
3.1 LLM Prompting & Role Definition
The LLM (Llama 3.1 8B) is assigned a specific role: SAR Analyst Assistant. This role ensures that the model's behavior aligns with institutional standards and focuses on providing concise, relevant information. The LLM is provided with strict instructions and a predefined checklist of topics to guide its analysis. The prompt includes the following constraints:
•	Use only information present in the SAR narrative.
•	Do not make inferences or assumptions beyond the provided data.
•	Respond in a structured format (specified below).
3.2 LLM Output Format: Brief Overview
The Brief Overview is a concise summary of the SAR narrative, designed to quickly provide SAR Managers with the essential information. It is limited to approximately 50-75 words. The format is a single paragraph, highlighting the primary suspicious activity.
3.2.1 Example Brief Overview
Input Narrative: "Customer made multiple ATM withdrawals totaling $10,000 over a two-day period at various locations. The withdrawals were followed by a large wire transfer to an offshore account. The customer has no prior history of such activity."
LLM Generated Brief Overview: "This SAR concerns a customer who made $10,000 in ATM withdrawals over two days, followed by a large wire transfer to an offshore account. This activity is unusual for the customer and raises concerns about potential money laundering or structuring."
3.2.2 Benefits for SAR Reviewers
•	Rapid Understanding: Quickly grasp the key details of the SAR without reading the entire narrative.
•	Prioritization: Easily identify cases that require immediate attention.
•	Efficiency: Reduce the time spent reviewing each SAR.
3.3 LLM Output Format: Detailed Description
The Detailed Description provides a more comprehensive summary of the SAR narrative, expanding on the Brief Overview with additional details and potential red flags. It is approximately 150-200 words. The format is structured with bullet points outlining key observations.
3.3.1 Example Detailed Description
Input Narrative: (Same as above)
LLM Generated Detailed Description:
•	Activity: Customer made multiple ATM withdrawals totaling $10,000 over two days.
•	Locations: Withdrawals occurred at geographically dispersed ATM locations.
•	Follow-up Transaction: A large wire transfer was initiated to an offshore account shortly after the withdrawals.
•	Customer History: The customer has no prior history of similar activity.
•	Potential Concerns: This pattern of activity may indicate structuring to avoid reporting requirements or potential money laundering.
3.3.2 Benefits for SAR Reviewers
•	Comprehensive Understanding: Gain a deeper understanding of the suspicious activity.
•	Red Flag Identification: Easily identify potential red flags and areas for further investigation.
•	Documentation Support: Provides a clear and concise summary for case documentation and reporting.
3.4 LLM Narrative Processing (Remains largely the same)
To maintain data integrity and traceability, SAR narratives are processed by the LLM individually. Each week’s batch of narratives is saved separately. This approach:
•	Prevents cross-contamination between cases.
•	Ensures that the LLM's output is directly tied to the specific narrative.
•	Facilitates job restarts after interruptions without data loss.
4. Final Structured Output & Integration
4.1 Combining Regex and LLM Results
The outputs from both the Regex and LLM analysis are combined into a unified topic list for each SAR. A topic is assigned to the SAR if it is identified by either the Regex or the LLM. This preserves existing rule logic and adds contextual intelligence, improving coverage without replacing existing controls.
4.2 Multiple Topics per Case (Remains largely the same)
A single SAR can involve multiple risk behaviors. To reflect this complexity, the system allows for multiple topics to be assigned to each narrative. This provides a more comprehensive and accurate representation of the suspicious activity.
5. Validation and Maintenance (Sections 5.1, 5.2, 5.3, & 5.4 remain largely the same, but emphasize validation of the LLM outputs.)
This section outlines the procedures for validating the LLM's output and maintaining the accuracy and reliability of the system.
5.1 LLM Result Validation
During development and ongoing maintenance, the LLM's output is validated to ensure that every generated response is:
•	Evidence-Based: Directly supported by information in the SAR narrative.
•	Traceable: Linked back to the specific text in the narrative.
•	Transparent: Any uncertainties or ambiguities are clearly identified.
•	Complete and Accurate: The response is comprehensive and free of errors.
•	Flagged as "Missing": When the LLM is unable to identify a topic.
5.2 SAR Output Validation
To ensure the accuracy of the combined Regex and LLM process, a validation set of 10 test cases per topic was compiled (5 cases including the topic, 5 cases excluding it). The system successfully identified all test cases before transitioning to the monthly BAU process. This validation confirms:
•	Evidence exists in the narrative for identified topics.
•	Flags are defensible in audit or quality assurance reviews.
•	Risk is not overstated.
5.3 Monthly BAU Maintenance
The monthly BAU process includes the following validation steps:
•	Data Source Review: Verification of the data source (Oracle database) to ensure data integrity.
•	Count Consistency Check: Comparing the count of SARs in the final output with the count in the Oracle database.
•	Topic Coverage Review: Checking for any cases where no topics were identified and investigating the reasons.
•	Pipeline Updates: Regular updates to the SAR Topics Analysis Pipeline based on user feedback and changing business requirements.
5.4 Data Refresh Schedule
Data is refreshed on the 1st of every month to ensure that the analysis is based on the most up-to-date information.
up-to-date information.
=============================================================================================
SAR Review Enhancement – Technical Documentation & User Guide
Version: 1.0
Date: October 26, 2023
Author: [Your Name]
1. Introduction
1.1. Purpose: This document details the SAR Review Enhancement project, outlining its functionality, data sources, technical implementation, and how it assists SAR Managers in their review process.
1.2. Project Overview:
Suspicious Activity Report (SAR) reviews are often time-consuming, requiring careful reading of potentially lengthy narratives. This project aims to accelerate that process by providing concise summaries and highlighting key information within those narratives. The SAR Review Enhancement project automatically generates a Brief Overview and a detailed Description of each SAR Narrative using a Large Language Model (LLM). Additionally, the project utilizes regular expressions to identify and flag predefined keywords relevant to SAR investigations.
Value Proposition: This tool reduces review time, allowing Managers to focus on complex cases. The automated summaries and keyword highlighting ensure critical information isn't overlooked, improving risk assessment and potentially accelerating investigations.
1.3. Target Audience: This document is primarily intended for SAR Managers and reviewers responsible for assessing and investigating suspicious activity reports.
2. Data Sources & Extraction
2.1. Data Source: Oracle Database
The system retrieves SAR data from an Oracle database containing all submitted Suspicious Activity Reports.
2.2. Data Extraction Process:
SQL queries are used to extract SAR data based on batch criteria defined by the SAR Operations team. The queries extract the following fields:
•	Case ID: A unique identifier for the case associated with the SAR.
•	Report ID: A unique identifier for the specific SAR report.
•	Report File Date: The date the SAR report was initially filed.
•	SAR Narrative: The full text content of the SAR report, detailing the suspicious activity.
Data is extracted nightly at 1:00 AM EST. Each batch typically contains between 500 and 2000 SAR reports.
2.3. Data Validation:
During extraction, basic checks are performed to ensure all required fields (Case ID, Report ID, Report File Date, and SAR Narrative) are present and not empty. Reports with missing data are flagged and excluded from processing, with an error message logged.
3. LLM Processing – Core Functionality
3.1. LLM Model:
The system utilizes the Llama 3.1 8B Large Language Model for generating the Brief Overview and Description. Llama 3.1 8B was chosen due to its balance of performance, cost-effectiveness, and accessibility, making it suitable for this task.
3.2. Prompt Engineering:
The prompt sent to the LLM is structured to guide the model in generating the desired output. The prompt instructs the LLM to analyze the SAR Narrative and produce a concise summary and a more detailed description. Specific instructions are included to constrain the length of the outputs and emphasize key information.
Example Prompt (Sanitized):
text
"Analyze the following SAR Narrative and provide:

1.  **Brief Overview:** A 2-3 sentence summary of the suspicious activity.
2.  **Description:** A detailed summary (approximately 100-150 words) of the activity, including key entities, amounts, and dates.

SAR Narrative: [SAR Narrative Text]"
The prompt has been iteratively refined through testing to optimize the quality and relevance of the generated summaries.
3.3. Output Format:
The LLM returns the Brief Overview and Description as a JSON object, with the keys "brief_overview" and "description". This structured format allows for easy integration with the data storage system.
3.4. Error Handling:
If the LLM fails to process a narrative (e.g., due to technical issues or invalid input), the system logs the error, flags the Case/Report ID for manual review, and stores the following default messages in the Brief Overview and Description fields: "LLM Processing Failed". This ensures that no SAR is overlooked due to processing errors.
4. Keyword Extraction (Regex Subroutines)
4.1. Purpose:
The keyword extraction process aims to highlight specific keywords within the SAR Narrative that are of particular interest to SAR Managers, as defined by the SAR Management team. This allows Managers to quickly identify reports potentially related to specific areas of concern.
4.2. Keyword List:
A predefined list of keywords is maintained and updated by the SAR Management team. These keywords represent critical terms and phrases used in suspicious activity reporting. Due to security considerations, the keyword list is not included in this document.
4.3. Regex Implementation:
Python regular expressions are used to search for the keywords within the SAR Narrative. The regular expressions are case-insensitive to ensure all occurrences of the keywords are identified.
4.4. Highlighting Mechanism:
Matched keywords are flagged in a separate column in the output data, labeled "Keyword Flags". The "Keyword Flags" column contains a comma-separated list of all keywords found within the SAR Narrative.
5. Data Storage
5.1. Storage Location:
The processed data, including the Brief Overview, Description, and Keyword Flags, is stored in a PostgreSQL table named sar_enhanced_data.
5.2. Data Schema:
The sar_enhanced_data table includes the following columns:
•	case_id (VARCHAR) - Unique identifier for the case.
•	report_id (VARCHAR) - Unique identifier for the report.
•	report_file_date (DATE) - Date the report was filed.
•	sar_narrative (TEXT) - Original SAR narrative text.
•	brief_overview (TEXT) - LLM-generated brief overview.
•	description (TEXT) - LLM-generated detailed description.
•	keyword_flags (TEXT) – Comma-separated list of matched keywords.
6. Using the Enhanced SAR Data
6.1. Accessing the Data:
The enhanced SAR data is accessible through a Tableau dashboard. The dashboard allows SAR Managers to search, filter, and view SARs based on Case ID, Report ID, keywords, date ranges, and the generated Brief Overview and Description.
6.2. Workflow Integration:
SAR Managers can use the Tableau dashboard to streamline their review process. The Brief Overview and Description provide a quick understanding of the report's content, while the Keyword Flags highlight potentially critical information. This allows Managers to prioritize reviews and focus on the most important cases, improving efficiency and reducing review time.
6.3. Example Scenario:
A SAR Manager receives a new batch of reports. They use the Tableau dashboard to filter by reports with 'Money Laundering' flagged as a keyword. They review the Brief Overview for each report, quickly identifying those requiring further investigation. They then examine the full SAR Narrative, with the keywords highlighted, to confirm their assessment and determine the appropriate course of action.
7. Limitations & Future Enhancements
7.1. Limitations:
•	The LLM may occasionally generate inaccurate or incomplete summaries, particularly for complex or poorly written SAR Narratives.
•	Keyword extraction relies on a predefined list and may not capture all relevant information or nuances within the SAR Narrative.
•	The system is dependent on the quality and completeness of the original SAR Narrative.
•	The LLM’s performance can be affected by variations in language style and terminology used in different SAR reports.
7.2. Future Enhancements:
•	Exploring more advanced LLM models with improved summarization capabilities.
•	Implementing a feedback mechanism for SAR Managers to provide feedback on the LLM's output, allowing for continuous improvement of the model.
•	Expanding the keyword list and automating its maintenance through machine learning techniques.
•	Adding sentiment analysis to the SAR Narrative to identify potentially high-risk reports.
•	Developing a natural language query interface to allow SAR Managers to search for reports using plain language questions.



